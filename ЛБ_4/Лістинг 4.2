M_DIV = 13      
M_MUL = 16      

A = 0.6180339887  


WORDS = ["СКІЛЬКИ","ВОВКА","НЕ","ГОДУЙ","А","ВІН","УСЕ","В","ЛІС","ДИВИТЬСЯ"]


LETTER_POSITIONS = {
'А':1,'Б':2,'В':3,'Г':4,'Ґ':5,'Д':6,'Е':7,'Є':8,'Ж':9,'З':10,'И':11,'І':12,
'Ї':13,'Й':14,'К':15,'Л':16,'М':17,'Н':18,'О':19,'П':20,'Р':21,'С':22,'Т':23,
'У':24,'Ф':25,'Х':26,'Ц':27,'Ч':28,'Ш':29,'Щ':30,'Ь':31,'Ю':32,'Я':33
}


def compute_key(word: str) -> int:
    total = 0
    for ch in word:
        total += LETTER_POSITIONS.get(ch, 0)
    return total



def hash_division(key: int) -> int:
    return key % M_DIV



def hash_multiplication(key: int) -> int:
    return int(M_MUL * ((key * A) % 1))



def build_closed_hash_table(words: list, method: str):
    table = [None] * (M_DIV if method == "division" else M_MUL)

    for word in words:
        key = compute_key(word)

       
        if method == "division":
            start = hash_division(key)
            M = M_DIV
        else:
            start = hash_multiplication(key)
            M = M_MUL

        
        for i in range(M):
            idx = (start + i) % M
            if table[idx] is None:
                table[idx] = word
                break
        else:
            print(f"Помилка: Таблиця переповнена, '{word}' не вставлено.")

    return table



def display_table(table, title):
    print("\n---", title, "---")
    print("Індекс | Слово")
    print("-------|---------------------")
    for i, item in enumerate(table):
        value = item if item is not None else "(NULL)"
        print(f"{i:02d}    | {value}")



table_div = build_closed_hash_table(WORDS, "division")
table_mul = build_closed_hash_table(WORDS, "multiplication")

display_table(table_div, "Закрита хеш-таблиця (метод ділення, M=13)")
display_table(table_mul, "Закрита хеш-таблиця (метод множення, M=16)")
